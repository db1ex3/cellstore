xquery version "3.0";
module namespace util = "http://api.28.io/util";

import module namespace req = "http://www.28msec.com/modules/http/request";

declare variable $util:collection-namespace := "http://28.io/collections";

declare function util:path($from as xs:integer) as xs:string*
{
  (fn:tokenize(req:path(),"/")[. != ""])[fn:position() >= $from]
};

declare function util:param-or-body($param-name as xs:string)
as xs:string?
{
  let $param := req:parameter-values($param-name)
  return
    if ($param) then $param else req:text-content()
};
