<div class="topbar text-center">
    <div class="btn-group">
        <a class="btn btn-xs" ng-model="page" btn-radio="'/views/dashboard.html'" href="/dashboard{{(cik?'/' + cik : '')}}"><i class="icn icn-dashboard"></i> Fundamental Accounting Concepts</a>
        <a class="btn btn-xs" ng-model="page" btn-radio="'/views/search.html'" href="/search{{(cik?'/' + cik : '')}}"><i class="icn icn-search"></i> Search facts</a>
        <a class="btn btn-xs" ng-model="page" btn-radio="'/views/analytics.html'" href="/analytics"><i class="icn icn-analytics"></i> Use of Extensions</a>
    </div>
</div>

<div class="cols fade-container">
	<div class="fade-content" ng-hide="cik || focused"></div>
	<div class="fade-panel-dashboard" ng-hide="cik || focused">
		<div class="arrow"></div>
		Search companies by business name, CIK or ticker simbol<br>
		to see information about the values of the concepts.
	</div>
	
	<div class="col-left col-md-3 col-sm-4 col-xs-12">
		<div class="col-xs-12">
			<input class="form-control" ng-class="{ 'fade-control': !cik }" type="text" ng-model="name" typeahead-on-select="selectEntity($item)"
				   placeholder="Search for a company..." ng-click="focused=true;"
				   typeahead="entity.name for entity in entities | filter:$viewValue | limitTo:8">
		</div>
		<div style="padding: 15px 10px;" class="clearfix">
			<div class="col-md-2 col-sm-4 col-xs-2" ng-show="cik">
				CIK
			</div>
			<div class="col-md-4 col-sm-8 col-xs-4" ng-show="cik">
				<b>{{cik}}</b>
			</div>
			<div class="col-md-3 col-sm-4 col-xs-3" ng-show="ticker">
				Symbol
			</div>
			<div class="col-md-3 col-sm-8 col-xs-3" ng-show="ticker">
				<b>{{ticker}}</b>
			</div>
		</div>
		<div style="padding: 15px 10px; border-top: 1px solid gainsboro; margin: 0px -10px;" class="clearfix" ng-show="cik">
			<div class="col-md-6 col-sm-6 col-xs-6">
				<h6 class="nowrap">FISCAL YEAR</h6>
				<ul class="selector" style="height: 97px">
					<li ng-repeat="y in usage" ng-class="{ selected: year==years[$index], disabled: !y.used }" ng-click="setYear(years[$index], y.used)">{{years[$index]}}</li>
				</ul>
			</div>
			<div class="col-md-6 col-sm-6 col-xs-6">
				<span style="margin-left: -15px; margin-top: 5px; float: left;">/</span>
				<h6 class="nowrap">PERIOD FOCUS</h6>
				<ul class="selector" style="height: 97px">
					<li ng-repeat="p in usage[years.indexOf(year)].periods" ng-class="{ selected: period==periods[$index], disabled: !p.used }" ng-click="setPeriod(periods[$index], p.used)">{{periods[$index]}}</li>
				</ul>
			</div>
		</div>
	</div>

	<div class="col-right col-md-9 col-sm-8 col-xs-12">
		<div class="col-md-12">
			<h3>Use the search feature to retrieve facts and concepts values from the SEC filings.</h3>
			<div class="white-box">
				<div class="row">
					<div class="col-md-6 col-sm-6 col-xs-6">
            <label>Concept map <a href="/concept-map/FundamentalAccountingConcepts"><i class="fa fa-question"></i></a></label>
						<select ng-model="conceptMap" ng-options="map for map in conceptMaps" class="form-control">
							<option value="">None</option>
						</select>
					</div>
					<div class="col-md-6 col-sm-6 col-xs-6">
						<label>Concept name</label>
						<input type="text" ng-model="conceptMapKey" placeholder="Type to search concept" class="form-control"
							   typeahead="key for key in conceptMapKeys | filter:$viewValue | limitTo: 20">
					</div>
				</div>
			
				<div class="row white-box-footer" ng-show="cik && year && period">
					<div class="col-md-2 col-sm-2 col-xs-3">
						<button class="btn btn-green btn-lg btn-block" class="form-control" ng-click="getValue()">GO</button>
					</div>
					<div class="col-md-10 col-sm-10 col-xs-9">
						<h4 ng-show="factValue" class="text-right">{{factValue}} {{factUnit}}</h4>
						<div ng-bind-html="factText"></div>
						<div class="text-left wrap" style="width: 100%" ng-show="originalConcept">Audit Trail: <b>{{originalConcept}}</b></div>
					</div>
				</div>
			</div>				
			<h3>Query History</h3>
			<div class="white-box">
				<div class="table-responsive">
					<table class="table">
					<thead>
						<th>Company</th>
						<th>Year/Period</th>
						<th>Concept Map</th>
						<th>Concept Name</th>
						<th>Value</th>
					</thead>
					<tbody>
						<tr ng-repeat="s in searches">
							<td>{{s.name}}</td>
							<td>{{s.year}}/{{s.period}}</td>
							<td>{{s.conceptMap || 'None'}}</td>
							<td><a href="javascript://" popover="{{s.conceptMapKey}}" popover-placement="top" popover-trigger="focus">{{trimURL(s.conceptMapKey)}}</a></td>
							<td class="nowrap text-right">
								<div ng-show="s.factValue">{{s.factValue}} {{s.factUnit}}</div>
								<a href="javascript://" ng-hide="s.factValue" ng-click="showDetails(s.factText)">View Text</a>
							</td>
						</tr>
						<tr ng-hide="searches.length">
							<td class="text-center h4" colspan="5">
								No search queries were performed.
							</td>
						</tr>
					</tbody>
					</table>
				</div>
			</div>
    </div>
</div>
</div>
