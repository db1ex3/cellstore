<swagger swagger="1.2" host="secxbrl.28.io" basePath="/v1/_queries/public"><info><title>API Title</title><description type="xhtml" xml:lang="en"/><version>1.0</version></info><schemes><scheme>http</scheme></schemes><produces><mime>application/json</mime></produces><resources><resource path="/billing/get-billing-info.jq"><description type="xhtml" xml:lang="en">Get Billing Information</description><method method="POST" nickname="getBillingInfo"><summary>Get the billing information using a token.</summary><description type="xhtml" xml:lang="en">Description</description><parameters><parameter name="format" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The result format</description><enum><value>json</value><value>text</value><value>xml</value><value>excel</value></enum></parameter><parameter name="token" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The token</description></parameter><parameter name="_method" required="false" type="query" value-type=""><description type="xhtml" xml:lang="en"/></parameter></parameters><errors><error code="400" reponse-model="Error"><description>if a mandatory parameter is missing</description></error><error code="403" reponse-model="Error"><description>if the token doesn't exist or could not be authenticated</description></error></errors><successes><error code="200" reponse-model="BillingInfo"><description>if the billing information was retreived successfully</description></error></successes><examples><example title="Get Billing Information"><description>Get the billing information using a token</description><request>[API_URL]/_queries/public/billing/get-billing-info.jq?_method=POST&amp;token=a02516b2-2cdb-4ef3-9e2e-adfaa3660b87</request><response>{ "recurlyAccount" : "SECXBRL_a0251...", "recurlySignature" : "....", "recurlySubdomain" : "28msec", "billingData": { ... } }</response></example></examples></method></resource><resource path="/billing/set-billing-info.jq"><description type="xhtml" xml:lang="en">Set Billing Information using a recurly token</description><method method="POST" nickname="setBillingInfo"><summary>Sets the billing information using a recurly token.</summary><description type="xhtml" xml:lang="en">Description</description><parameters><parameter name="format" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The result format</description><enum><value>json</value><value>text</value><value>xml</value><value>excel</value></enum></parameter><parameter name="recurlyToken" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The Recurly token</description></parameter><parameter name="token" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The user's token</description></parameter><parameter name="_method" required="false" type="query" value-type=""><description type="xhtml" xml:lang="en"/></parameter></parameters><errors><error code="400" reponse-model="Error"><description>if a mandatory parameter is missing</description></error><error code="403" reponse-model="Error"><description>if the token doesn't exist or could not be authenticated</description></error></errors><successes><error code="200" reponse-model="BillingInfo"><description>if the billing information was updated successfully</description></error></successes><examples><example title="Set Billing Information using a Recurly Token"><description>Set the billing information using a token</description><request>[API_URL]/_queries/public/billing/set-billing-info.jq?_method=POST&amp;recurlyToken=1234556523-abc&amp;token=a02516b2-2cdb-4ef3-9e2e-adfaa3660b87</request><response>{ "recurlyAccount" : "SECXBRL_a0251...", "recurlySignature" : "....", "recurlySubdomain" : "28msec", "billingData": { ... } }</response></example></examples></method></resource><resource path="/billing/invoices.jq"><description type="xhtml" xml:lang="en">List invoices</description><method method="POST" nickname="invoices"><summary>Lists the invoices of the user identified by token</summary><description type="xhtml" xml:lang="en">Description</description><parameters><parameter name="format" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The result format</description><enum><value>json</value><value>text</value><value>xml</value><value>excel</value></enum></parameter><parameter name="cursor" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The current cursor, used for paging</description></parameter><parameter name="limit" required="false" type="query" value-type="number"><description type="xhtml" xml:lang="en">The limit of invoices to read</description></parameter><parameter name="token" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The user's token</description></parameter><parameter name="_method" required="false" type="query" value-type=""><description type="xhtml" xml:lang="en"/></parameter></parameters><errors><error code="400" reponse-model="Error"><description>if a mandatory parameter is missing</description></error><error code="403" reponse-model="Error"><description>if the token doesn't exist or could not be authenticated</description></error></errors><successes><error code="200" reponse-model="Invoices"><description>if the list of invoices was returned successfully</description></error></successes><examples><example title="Lists the invoices"><description>Lists the invoices of the user identified by token</description><request>[API_URL]/_queries/public/billing/invoices.jq?_method=POST&amp;token=a02516b2-2cdb-4ef3-9e2e-adfaa3660b87</request><response>{ "count": 2, "invoices" : [ { "uuid": "1234567890abcdef1234567890abcdef", "state" : "collected", "invoiceNumber" : 5391, "subtotalInCents" : 100, "taxInCents" : 0, "totalInCents" : 100, "currency" : "USD", "createdAt" : "2014-05-30T17:51:13Z", "closedAt" : "2014-05-30T17:51:13Z", "lineItems" : [ { "type" : "charge", "uuid" : "27bd0cf2df218c59e20af042c18ac445", "state" : "invoiced", "description" : "Invoiced item", "accountingCode" : "111", "origin" : "debit", "unitAmountInCents" : 100, "quantity" : 1, "discountInCents" : 0, "taxInCents" : 0, "totalInCents" : 100, "currency" : "USD", "taxable" : false, "startDate" : "2014-05-30T17:51:06Z", "createdAt" : "2014-05-30T17:51:06Z" } ], "transactions" : [ { "type" : "credit_card", "uuid" : "1234567890abcdef1234567890abcdef", "action" : "purchase", "amountInCents" : 100, "taxInCents" : 0, "currency" : "USD", "status" : "success", "paymentMethod" : "credit_card", "reference" : "123456", "source" : "transaction", "recurring" : true, "test" : true, "voidable" : true, "refundable" : true, "createdAt" : "2014-05-30T17:51:13Z" } ] }, {...} ] }</response></example></examples></method></resource><resource path="/billing/invoice.jq"><description type="xhtml" xml:lang="en">Get information about an invoice</description><method method="POST" nickname="invoice"><summary>Get information about an invoice of the user identified by token. If asked in PDF format, the invoice is returned rendered. Otherwise metadata is returned.</summary><description type="xhtml" xml:lang="en">Description</description><parameters><parameter name="format" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The result format</description><enum><value>json</value><value>text</value><value>xml</value><value>excel</value><value>pdf</value></enum></parameter><parameter name="invoiceNumber" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The invoice number from Recurly</description></parameter><parameter name="token" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The user's token</description></parameter><parameter name="_method" required="false" type="query" value-type=""><description type="xhtml" xml:lang="en"/></parameter></parameters><errors><error code="400" reponse-model="Error"><description>if a mandatory parameter is missing</description></error><error code="403" reponse-model="Error"><description>if the token doesn't exist or could not be authenticated</description></error></errors><successes><error code="200" reponse-model="Invoice"><description>if the invoice was returned successfully</description></error></successes><examples><example title="Get info about an invoice"><description/><request>[API_URL]/_queries/public/billing/invoice.jq?_method=POST&amp;invoiceNumber=5391&amp;token=a02516b2-2cdb-4ef3-9e2e-adfaa3660b87</request><response>{ "uuid": "1234567890abcdef1234567890abcdef", "state" : "collected", "invoiceNumber" : 5391, "subtotalInCents" : 100, "taxInCents" : 0, "totalInCents" : 100, "currency" : "USD", "createdAt" : "2014-05-30T17:51:13Z", "closedAt" : "2014-05-30T17:51:13Z", "lineItems" : [ { "type" : "charge", "uuid" : "27bd0cf2df218c59e20af042c18ac445", "state" : "invoiced", "description" : "Invoiced item", "accountingCode" : "111", "origin" : "debit", "unitAmountInCents" : 100, "quantity" : 1, "discountInCents" : 0, "taxInCents" : 0, "totalInCents" : 100, "currency" : "USD", "taxable" : false, "startDate" : "2014-05-30T17:51:06Z", "createdAt" : "2014-05-30T17:51:06Z" } ], "transactions" : [ { "type" : "credit_card", "uuid" : "1234567890abcdef1234567890abcdef", "action" : "purchase", "amountInCents" : 100, "taxInCents" : 0, "currency" : "USD", "status" : "success", "paymentMethod" : "credit_card", "reference" : "123456", "source" : "transaction", "recurring" : true, "test" : true, "voidable" : true, "refundable" : true, "createdAt" : "2014-05-30T17:51:13Z" } ] }</response></example></examples></method></resource><resource path="/billing/subscriptions.jq"><description type="xhtml" xml:lang="en">List subscriptions</description><method method="POST" nickname="subscriptions"><summary>Lists the subscriptions of the user identified by token</summary><description type="xhtml" xml:lang="en">Description</description><parameters><parameter name="format" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The result format</description><enum><value>json</value><value>text</value><value>xml</value><value>excel</value></enum></parameter><parameter name="token" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The user's token</description></parameter><parameter name="_method" required="false" type="query" value-type=""><description type="xhtml" xml:lang="en"/></parameter></parameters><errors><error code="400" reponse-model="Error"><description>if a mandatory parameter is missing</description></error><error code="403" reponse-model="Error"><description>if the token doesn't exist or could not be authenticated</description></error></errors><successes><error code="200" reponse-model="Invoices"><description>if the list of subscriptions was returned successfully</description></error></successes><examples><example title="Lists the subscriptions"><description>Lists the subscriptions of the user identified by token</description><request>[API_URL]/_queries/public/billing/subscriptions.jq?_method=POST&amp;token=a02516b2-2cdb-4ef3-9e2e-adfaa3660b87</request><response>{ "count": 2, "invoices" : [ { "uuid": "1234567890abcdef1234567890abcdef", "state" : "collected", "invoiceNumber" : 5391, "subtotalInCents" : 100, "taxInCents" : 0, "totalInCents" : 100, "currency" : "USD", "createdAt" : "2014-05-30T17:51:13Z", "closedAt" : "2014-05-30T17:51:13Z", "lineItems" : [ { "type" : "charge", "uuid" : "27bd0cf2df218c59e20af042c18ac445", "state" : "invoiced", "description" : "Invoiced item", "accountingCode" : "111", "origin" : "debit", "unitAmountInCents" : 100, "quantity" : 1, "discountInCents" : 0, "taxInCents" : 0, "totalInCents" : 100, "currency" : "USD", "taxable" : false, "startDate" : "2014-05-30T17:51:06Z", "createdAt" : "2014-05-30T17:51:06Z" } ], "transactions" : [ { "type" : "credit_card", "uuid" : "1234567890abcdef1234567890abcdef", "action" : "purchase", "amountInCents" : 100, "taxInCents" : 0, "currency" : "USD", "status" : "success", "paymentMethod" : "credit_card", "reference" : "123456", "source" : "transaction", "recurring" : true, "test" : true, "voidable" : true, "refundable" : true, "createdAt" : "2014-05-30T17:51:13Z" } ] }, {...} ] }</response></example></examples></method></resource><resource path="/billing/create-subscription.jq"><description type="xhtml" xml:lang="en">Create a subscription</description><method method="POST" nickname="createSubscription"><summary>Create a subscription to a plan</summary><description type="xhtml" xml:lang="en">Description</description><parameters><parameter name="format" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The result format</description><enum><value>json</value><value>text</value><value>xml</value><value>excel</value></enum></parameter><parameter name="plan" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The plan code</description></parameter><parameter name="quantity" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The quantity (default 1)</description></parameter><parameter name="coupon" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The coupon code</description></parameter><parameter name="token" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The user's token</description></parameter><parameter name="_method" required="false" type="query" value-type=""><description type="xhtml" xml:lang="en"/></parameter></parameters><errors><error code="400" reponse-model="Error"><description>if a mandatory parameter is missing</description></error><error code="403" reponse-model="Error"><description>if the token doesn't exist or could not be authenticated</description></error></errors><successes><error code="200" reponse-model="Success"><description>if the subscription was created successfully</description></error></successes><examples><example title="Create a subscription"><description>Create a subscription to a plan with coupon</description><request>[API_URL]/_queries/public/billing/create-subscription.jq?_method=POST&amp;plan=sec_pro&amp;coupon=JUSTFORYOU&amp;token=a02516b2-2cdb-4ef3-9e2e-adfaa3660b87</request><response>{ "success": true }</response></example></examples></method></resource><resource path="/billing/cancel-subscription.jq"><description type="xhtml" xml:lang="en">Cancel a subscription</description><method method="POST" nickname="cancelSubscription"><summary>Cancel a subscription identified by recurly id</summary><description type="xhtml" xml:lang="en">Description</description><parameters><parameter name="format" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The result format</description><enum><value>json</value><value>text</value><value>xml</value><value>excel</value></enum></parameter><parameter name="recurlyId" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The subscription id</description></parameter><parameter name="plan" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The plan code</description></parameter><parameter name="token" required="true" type="query" value-type="string"><description type="xhtml" xml:lang="en">The user's token</description></parameter><parameter name="_method" required="false" type="query" value-type=""><description type="xhtml" xml:lang="en"/></parameter></parameters><errors><error code="400" reponse-model="Error"><description>if a mandatory parameter is missing</description></error><error code="403" reponse-model="Error"><description>if the token doesn't exist or could not be authenticated</description></error></errors><successes><error code="200" reponse-model="Success"><description>if the subscription was canceled successfully</description></error></successes><examples><example title="Cancel a subscription"><description>Cancel a subscription identified by recurly id</description><request>[API_URL]/_queries/public/billing/cancel-subscription.jq?_method=POST&amp;recurlyId=a02516b1-2cdb-4ef3-9e2e-adfaa3660b87&amp;plan=sec_pro&amp;token=a02516b2-2cdb-4ef3-9e2e-adfaa3660b87</request><response>{ "success": true }</response></example></examples></method></resource><resource path="/billing/usage.jq"><description type="xhtml" xml:lang="en">Get the monthly usage</description><method method="GET" nickname="usage"><summary>Get the monthly usage of the user identified by token</summary><description type="xhtml" xml:lang="en">Description</description><parameters><parameter name="format" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The result format</description><enum><value>json</value><value>text</value><value>xml</value><value>excel</value></enum></parameter><parameter name="token" required="false" type="query" value-type="string"><description type="xhtml" xml:lang="en">The user's token</description></parameter><parameter name="_method" required="false" type="query" value-type=""><description type="xhtml" xml:lang="en"/></parameter></parameters><errors><error code="400" reponse-model="Error"><description>if a mandatory parameter is missing</description></error><error code="403" reponse-model="Error"><description>if the token doesn't exist or could not be authenticated</description></error></errors><successes><error code="200" reponse-model="Usage"><description>if the usage information was returned successfully</description></error></successes><examples><example title="Get the usage"><description>Get the usage of the user identified by token</description><request>[API_URL]/_queries/public/billing/usage.jq?_method=POST&amp;token=a02516b2-2cdb-4ef3-9e2e-adfaa3660b87</request><response>{ "calls": 45, "fromDate" : "2014-05-01T00:00:00Z", "toDate" : "2014-06-01T00:00:00Z", "email" : "example@secxbrl.info" }</response></example></examples></method></resource></resources></swagger>